!function(){var t;function e(t){return new EventSource(t,{withCredentials:!0})}function n(t){return t.trim().split(/\s+/)}function r(e,r){if(null==e)return null;o(e,"sse-connect").forEach(function(e){var n=t.getAttributeValue(e,"sse-connect");null!=n&&s(e,n,r)}),o(e,"hx-sse").forEach(function(e){var a=function e(r){var s=t.getAttributeValue(r,"hx-sse");if(s)for(var a=n(s),o=0;o<a.length;o++){var i=a[o].split(/:(.+)/);if("connect"===i[0])return i[1]}}(e);null!=a&&s(e,a,r)})}function s(e,n,s){var o=htmx.createEventSource(n);o.onerror=function(n){if(t.triggerErrorEvent(e,"htmx:sseError",{error:n,source:o}),!a(e)&&o.readyState===EventSource.CLOSED){var i=Math.random()*(2^(s=s||0))*500;window.setTimeout(function(){r(e,Math.min(7,s+1))},i)}},o.onopen=function(n){t.triggerEvent(e,"htmx:sseOpen",{source:o})},t.getInternalData(e).sseEventSource=o}function a(e){if(!t.bodyContains(e)){var n=t.getInternalData(e).sseEventSource;if(void 0!=n)return n.close(),!0}return!1}function o(e,n){var r=[];return t.hasAttribute(e,n)&&r.push(e),e.querySelectorAll("["+n+"], [data-"+n+"]").forEach(function(t){r.push(t)}),r}function i(e,n){t.withExtensions(e,function(t){n=t.transformResponse(n,null,e)});var r=t.getSwapSpecification(e),s=t.getTarget(e),a=t.makeSettleInfo(e);t.selectAndSwap(r.swapStyle,s,e,n,a),a.elts.forEach(function(e){e.classList&&e.classList.add(htmx.config.settlingClass),t.triggerEvent(e,"htmx:beforeSettle")}),r.settleDelay>0?setTimeout(u(a),r.settleDelay):u(a)()}function u(e){return function(){e.tasks.forEach(function(t){t.call()}),e.elts.forEach(function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),t.triggerEvent(e,"htmx:afterSettle")})}}function c(e){return null!=t.getInternalData(e).sseEventSource}htmx.defineExtension("sse",{init:function(n){t=n,void 0==htmx.createEventSource&&(htmx.createEventSource=e)},onEvent:function(e,s){switch(e){case"htmx:beforeCleanupElement":var u=t.getInternalData(s.target);u.sseEventSource&&u.sseEventSource.close();return;case"htmx:afterProcessNode":r(s.target),function e(r){var s=t.getClosestMatch(r,c);if(null==s)return null;var u=t.getInternalData(s).sseEventSource;o(r,"sse-swap").forEach(function(e){var o=t.getAttributeValue(e,"sse-swap");if(o)var c=o.split(",");else var c=function e(r){var s=t.getAttributeValue(r,"hx-sse"),a=[];if(null!=s)for(var o=n(s),i=0;i<o.length;i++){var u=o[i].split(/:(.+)/);"swap"===u[0]&&a.push(u[1])}return a}(e);for(var l=0;l<c.length;l++){var f=c[l].trim(),v=function(n){!a(s)&&(t.bodyContains(e)||u.removeEventListener(f,v),i(e,n.data),t.triggerEvent(r,"htmx:sseMessage",n))};t.getInternalData(e).sseEventListener=v,u.addEventListener(f,v)}}),o(r,"hx-trigger").forEach(function(e){var n=t.getAttributeValue(e,"hx-trigger");if(null!=n&&"sse:"==n.slice(0,4)){n=n.substr(4);var r=function(){!a(s)&&(t.bodyContains(e)||u.removeEventListener(n,r))}}})}(s.target)}}})}();